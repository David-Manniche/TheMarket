$(function() {		$('input[name=\'path\']').autocomplete({		'source': function(request, response) {			$.ajax({				url: fcom.makeUrl('productCategories', 'autocomplete',[1]),				data: {keyword: encodeURIComponent(request),fIsAjax:1 },				dataType: 'json',				type: 'post',				success: function(json) {					json.unshift({						prodcat_id: 0,						prodcat_identifier: '--- None ---'					});					response($.map(json, function(item) {						return {							label: item['prodcat_identifier'],							value: item['prodcat_id']						}					}));				}			});		},		'select': function(item) {			$('input[name=\'path\']').val(item['label']);			$('input[name=\'prodcat_parent\']').val(item['value']);		}	});        setupCategory = function() {        var frm = $('#frmProdCategory');        var validator = $(frm).validation({errordisplay: 3});        if (validator.validate() == false) {            return false;        }                   if (!$(frm).validate()) {            return false;         }        var data = fcom.frmData(frm);          fcom.updateWithAjax(fcom.makeUrl('ProductCategories', 'setup'), data, function(t) {        });        	};        categoryImages = function(prodCatId,imageType,slide_screen,lang_id){		fcom.ajax(fcom.makeUrl('ProductCategories', 'images', [prodCatId,imageType,lang_id,slide_screen]), '', function(t) {			if(imageType=='icon') {				$('#icon-image-listing').html(t);                var iconImageId = $("#icon-image-listing li").attr('id');                 $("[name='cat_icon_image_id']").val(iconImageId);			} else if(imageType=='banner') {				$('#banner-image-listing').html(t);                 var bannerImageId = $("#banner-image-listing li").attr('id');                 $("[name='cat_banner_image_id']").val(bannerImageId);			}		});	};        deleteImage = function(fileId, prodcatId, imageType, langId, slide_screen){		if( !confirm(langLbl.confirmDeleteImage) ){ return; }		fcom.updateWithAjax(fcom.makeUrl('productCategories', 'removeImage',[fileId,prodcatId,imageType,langId,slide_screen]), '', function(t) {			categoryImages( prodcatId, imageType, slide_screen, langId );		});	};    });$(document).on('click','.catFile-Js',function(){	var node = this;	$('#form-upload').remove();	var formName = $(node).attr('data-frm');	var slide_screen = 0;	if(formName == 'catIcon'){		var lang_id = $("[name='icon_lang_id']").val();		var prodcat_id = $("[name='prodcat_id']").val();		var imageType = 'icon';	}else if(formName == 'catBanner'){		var lang_id = $("input[name='banner_lang_id']").val();		var prodcat_id = $("[name='prodcat_id']").val();		slide_screen = $("[name='slide_screen']").val();		var imageType = 'banner';	}	var fileType = $(node).attr('data-file_type');	var frm = '<form enctype="multipart/form-data" id="form-upload" style="position:absolute; top:-100px;" >';	frm = frm.concat('<input type="file" name="file" />');	frm = frm.concat('<input type="hidden" name="file_type" value="' + fileType + '">');	frm = frm.concat('<input type="hidden" name="prodcat_id" value="' + prodcat_id + '">');	frm = frm.concat('<input type="hidden" name="lang_id" value="' + lang_id + '">');	frm = frm.concat('<input type="hidden" name="slide_screen" value="' + slide_screen + '">');	frm = frm.concat('</form>');	$('body').prepend(frm);	$('#form-upload input[name=\'file\']').trigger('click');	if (typeof timer != 'undefined') {		clearInterval(timer);	}	timer = setInterval(function() {		if ($('#form-upload input[name=\'file\']').val() != '') {			clearInterval(timer);			$val = $(node).val();			$.ajax({				url: fcom.makeUrl('ProductCategories', 'setUpCatImages'),				type: 'post',				dataType: 'json',				data: new FormData($('#form-upload')[0]),				cache: false,				contentType: false,				processData: false,				beforeSend: function() {					$(node).val('Loading');				},				complete: function() {					$(node).val($val);					fcom.resetFaceboxHeight();				},				success: function(ans) {						if(ans.status == 1){							fcom.displaySuccessMessage(ans.msg);							$('#form-upload').remove();							categoryImages(prodcat_id,imageType,slide_screen,lang_id);						}else{							fcom.displayErrorMessage(ans.msg);						}					},					error: function(xhr, ajaxOptions, thrownError) {						alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);					}				});		}	}, 500);});